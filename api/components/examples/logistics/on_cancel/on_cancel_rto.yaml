summary: RTO Initiation
description: LSP updates the forward shipment to RTO and creates a new RTO
  fulfillment (RTO-Initiated)
value:
  context:
    domain: nic2004:60232
    location:
      city:
        code: std:080
      country:
        code: IND
    version: 2.0.0
    action: on_cancel
    bap_id: lbnp.com
    bap_uri: https://lbnp.com/ondc
    bpp_id: lsp.com
    bpp_uri: https://lsp.com/ondc
    transaction_id: T1
    message_id: M5
    timestamp: 2024-11-20T23:00:30.000Z
  message:
    order:
      id: O2
      cancellation:
        cancelled_by: lsp.com
        reason:
          id: "127"
      provider:
        id: P1
        locations:
          - id: L1
      items:
        - id: I1
          descriptor:
            code: P2P
          time:
            label: TAT
            duration: PT45M
            timestamp: 2024-11-20
          fulfillment_ids:
            - "1"
          category_ids:
            - SAME DAY DELIVERY
        - id: I2
          descriptor:
            code: P2P
          time:
            label: TAT
            duration: PT45M
            timestamp: 2024-11-20
          fulfillment_ids:
            - 1-RTO
          category_ids:
            - SAME DAY DELIVERY
      quote:
        price:
          currency: INR
          value: "82.60"
        breakup:
          - title: DELIVERY
            item:
              id: I1
            price:
              currency: INR
              value: "50.00"
          - title: TAX
            item:
              id: I1
            price:
              currency: INR
              value: "9.00"
          - title: RTO
            item:
              id: I2
            price:
              currency: INR
              value: "20.0"
          - title: TAX
            item:
              id: I2
            price:
              currency: INR
              value: "3.60"
      fulfillments:
        - id: "1"
          state:
            descriptor:
              code: RTO
          tracking: false
          agent:
            name: agent_name
            phone: "9886098860"
          vehicle:
            registration: 3LVJ945
          type: DELIVERY
          stops:
            - type: START
              person:
                name: person_name
              location:
                id: S1
                gps: 12.4535,77.9283
                address: name, My house or building name, My street name
                city:
                  name: Bengaluru
                state:
                  name: Karnataka
                country:
                  name: India
                area_code: "560041"
              contact:
                phone: "9886098860"
                email: abcd.efgh@gmail.com
              instructions:
                code: "2"
                short_desc: value of PCC
                long_desc: QR code will be attached to package
                additional_desc:
                  content_type: text/html
                  url: ..
              time:
                duration: PT15M
                range:
                  start: 2024-11-20T22:30:00.000Z
                  end: 2024-11-20T22:45:00.000Z
            - type: END
              person:
                name: person_name
              location:
                gps: 12.4535445,77.9283792
                address: "My house or building #, My house or building name, My street name"
                city:
                  name: Bengaluru
                state:
                  name: Karnataka
                country:
                  name: India
                area_code: "560076"
              contact:
                phone: "9886098860"
                email: abcd.efgh@gmail.com
              instructions:
                code: "3"
                short_desc: value of DCC
              time:
                range:
                  start: 2024-11-20T23:00:00.000Z
                  end: 2024-11-20T23:15:00.000Z
          tags:
            - descriptor:
                code: RTO_EVENT
              list:
                - descriptor:
                    code: RETRY_COUNT
                  value: "3"
                - descriptor:
                    code: RTO_ID
                  value: F1-RTO
                - descriptor:
                    code: CANCELLATION_REASON_ID
                  value: "127"
                - descriptor:
                    code: CANCELLED_BY
                  value: lsp.com
            - descriptor:
                code: IGM_REQUEST
              list:
                - descriptor:
                    code: ID
                  value: Issue1
            - descriptor:
                code: PRECANCEL_STATE
              list:
                - descriptor:
                    code: FULFILLMENT_STATE
                  value: Order-picked-up
                - descriptor:
                    code: UPDATED_AT
                  value: 2023-06-06T23:15:00.000Z
            - descriptor:
                code: LINKED_PROVIDER
              list:
                - descriptor:
                    code: ID
                  value: P1
                - descriptor:
                    code: NAME
                  value: Seller1
                - descriptor:
                    code: ADDRESS
                  value: shop_name,building_name,locality,city,state,pincode
            - descriptor:
                code: LINKED_ORDER
              list:
                - descriptor:
                    code: ID
                  value: RO1
                - descriptor:
                    code: CURRENCY
                  value: INR
                - descriptor:
                    code: DECLARED_VALUE
                  value: "300.0"
                - descriptor:
                    code: WEIGHT_UNIT
                  value: kilogram
                - descriptor:
                    code: WEIGHT_VALUE
                  value: "3.0"
                - descriptor:
                    code: DIM_UNIT
                  value: centimeter
                - descriptor:
                    code: LENGTH
                  value: "1.0"
                - descriptor:
                    code: BREADTH
                  value: "1.0"
                - descriptor:
                    code: HEIGHT
                  value: "1.0"
                - descriptor:
                    code: SHIPMENT_TYPE
                  value: box
            - descriptor:
                code: LINKED_ORDER_ITEM
              list:
                - descriptor:
                    code: CATEGORY
                  value: Grocery
                - descriptor:
                    code: NAME
                  value: Atta
                - descriptor:
                    code: CURRENCY
                  value: INR
                - descriptor:
                    code: VALUE
                  value: "70.0"
                - descriptor:
                    code: QUANTITY
                  value: "2"
                - descriptor:
                    code: WEIGHT_UNIT
                  value: kilogram
                - descriptor:
                    code: WEIGHT_VALUE
                  value: "1.0"
            - descriptor:
                code: LINKED_ORDER_ITEM
              list:
                - descriptor:
                    code: CATEGORY
                  value: Grocery
                - descriptor:
                    code: NAME
                  value: Basmati Rice
                - descriptor:
                    code: CURRENCY
                  value: INR
                - descriptor:
                    code: VALUE
                  value: "160.0"
                - descriptor:
                    code: QUANTITY
                  value: "1"
                - descriptor:
                    code: WEIGHT_UNIT
                  value: kilogram
                - descriptor:
                    code: WEIGHT_VALUE
                  value: "1.0"
            - descriptor:
                code: SHIPPING_LABEL
              list:
                - descriptor:
                    code: TYPE
                  value: pdf
                - descriptor:
                    code: URL
                  value: public link to pdf
            - descriptor:
                code: EBN
              list:
                - descriptor:
                    code: ID
                  value: EBN1
                - descriptor:
                    code: EXPIRY_DATE
                  value: 2024-06-30T12:00:00.000Z
            - descriptor:
                code: AWB
              list:
                - descriptor:
                    code: ID
                  value: "1227262193237777"
        - id: 1-RTO
          state:
            descriptor:
              code: RTO-INITIATED
          type: RTO
          stops:
            - type: START
              time:
                timestamp: 2024-11-21T14:00:00.000Z
          tags:
            - descriptor:
                code: EBN
              list:
                - descriptor:
                    code: ID
                  value: EBN2
                - descriptor:
                    code: EXPIRY_DATE
                  value: 2024-06-30T12:00:00.000Z
      billing:
        name: ONDC sellerNP
        address: My building no, My building name, My street name
        state:
          name: Karnataka
        city:
          name: Bengaluru
        country:
          name: India
        tax_id: XXXXXXXXXXXXXXX
        email: abcd.efgh@gmail.com
        phone: "9886098860"
        time:
          timestamp: 2024-11-20T21:30:00.000Z
      created_at: 2024-11-20T22:00:00.000Z
      updated_at: 2024-11-20T22:00:30.000Z
      status: IN-PROGRESS
      payments:
        - type: POST-FULFILLMENT
          collected_by: BPP
          tags:
            - descriptor:
                code: SETTLEMENT_TERMS
              list:
                - descriptor:
                    code: SETTLEMENT_BASIS
                  value: invoicing
                - descriptor:
                    code: SETTLEMENT_WINDOW
                  value: P15D
                - descriptor:
                    code: SETTLEMENT_COUNTERPARTY
                  value: buyer-app
                - descriptor:
                    code: SETTLEMENT_TYPE
                  value: upi
                - descriptor:
                    code: UPI_ADDRESS
                  value: gft@oksbi
                - descriptor:
                    code: SETTLEMENT_BANK_ACCOUNT_NO
                  value: XXXXXXXXXX
                - descriptor:
                    code: SETTLEMENT_IFSC_CODE
                  value: XXXXXXXXX
